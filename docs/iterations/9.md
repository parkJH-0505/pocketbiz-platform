# Sprint 9: Admin Console 기초 (2주)

## 목표
관리자를 위한 KPI 관리 및 시스템 운영 도구 구축

## 작업 목록

### Admin 인증 & 권한
- [ ] Admin 계정 시스템 🔴
  ```typescript
  interface AdminUser {
    id: string;
    email: string;
    name: string;
    role: 'super_admin' | 'admin' | 'operator';
    permissions: Permission[];
    lastLogin: Date;
  }
  
  interface Permission {
    resource: 'kpi' | 'program' | 'user' | 'assessment';
    actions: ('create' | 'read' | 'update' | 'delete')[];
  }
  ```

- [ ] 관리자 권한 체크 🔴
  - 미들웨어 구현
  - 역할 기반 접근 제어
  - 감사 로그

- [ ] Admin 전용 라우팅 🔴
  - /admin/* 경로 보호
  - 권한별 메뉴 표시

### KPI 라이브러리 관리
- [ ] KPI 목록 표시 (테이블) 🔴
  ```typescript
  interface KPITableColumns {
    kpiId: string;
    sector: string;
    axis: string;
    question: string;
    inputType: string;
    stages: string[]; // 적용 단계
    lastModified: Date;
    modifiedBy: string;
  }
  ```

- [ ] KPI 추가/수정/삭제 🔴
  - 폼 유효성 검증
  - 미리보기 기능
  - 변경 이력 추적

- [ ] 단계별 규칙 편집 🔴
  - 가중치 설정 (x1/x2/x3)
  - 선택지 편집
  - 점수 매핑

- [ ] 선택지 레지스트리 관리 🔴
  ```typescript
  interface ChoiceRegistry {
    id: string;
    name: string;
    type: 'rubric' | 'stage' | 'multiselect';
    choices: {
      label: string;
      value: any;
      score?: number;
    }[];
    usedIn: string[]; // KPI IDs
  }
  ```

### 데이터 가져오기/내보내기
- [ ] 엑셀 파일 업로드 UI 🔴
  - 드래그 앤 드롭
  - 파일 형식 검증
  - 진행률 표시

- [ ] 데이터 검증 및 미리보기 🔴
  ```typescript
  interface ImportPreview {
    fileName: string;
    totalRows: number;
    validRows: number;
    errors: {
      row: number;
      column: string;
      error: string;
    }[];
    preview: any[]; // 처음 10개 행
  }
  ```

- [ ] 일괄 업데이트 기능 🔴
  - 변경사항 미리보기
  - 롤백 기능
  - 부분 적용 옵션

- [ ] CSV 내보내기 🟡
  - 필터 적용 내보내기
  - 템플릿 다운로드

### Admin 대시보드
- [ ] 시스템 현황 위젯 🔴
  - 총 사용자/조직 수
  - 활성 진단 수
  - 최근 가입 현황

- [ ] KPI 사용 통계 🟡
  - 응답률 분석
  - 입력 시간 분석
  - 오류 빈도

- [ ] 버전 관리 시스템 🔴
  ```typescript
  interface KPIVersion {
    versionId: string;
    versionNumber: string; // "1.0.0"
    createdAt: Date;
    createdBy: string;
    changes: string[];
    status: 'draft' | 'published' | 'deprecated';
  }
  ```

## UI 컴포넌트
- [ ] 데이터 테이블 (정렬/필터/페이징)
- [ ] 일괄 작업 툴바
- [ ] 변경사항 비교 뷰어
- [ ] 임포트 위저드

## 완료 기준
- [ ] KPI 1000개 관리 가능
- [ ] 엑셀 임포트 성공률 > 95%
- [ ] 관리 작업 시간 50% 단축
- [ ] 데이터 무결성 100% 보장